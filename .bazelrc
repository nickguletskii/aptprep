# Use LLVM toolchain only, disable system cc toolchain discovery
build --incompatible_enable_cc_toolchain_resolution
build --action_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1

# Configure Rust to use LLVM linker
build --linkopt=-fuse-ld=lld

# Cross-compilation platform configurations
build:linux-x86_64 --platforms=//platforms:linux_x86_64 --extra_toolchains=@llvm_toolchain//:cc-toolchain-x86_64-linux
# TODO: Actually implement cross-compilation
build:linux-aarch64 --platforms=//platforms:linux_aarch64
build:macos-x86_64 --platforms=//platforms:macos_x86_64
build:macos-aarch64 --platforms=//platforms:macos_aarch64
build:windows-x86_64 --platforms=//platforms:windows_x86_64

# Default platform
build --platforms=@platforms//host